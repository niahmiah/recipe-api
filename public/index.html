<!doctype html>
<html ng-app="foodApp">
<head>
  <title>Menu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href='//fonts.googleapis.com/css?family=Raleway:400,300,600' rel='stylesheet' type='text/css'>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-touch.min.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-resource.min.js"></script>
  <script src="/scripts/3p/date.js"></script>
  <script src="/scripts/3p/moment.min.js"></script>
  <link href="/styles/normalize.css" rel="stylesheet" type="text/css">
  <link href="/styles/skeleton.css" rel="stylesheet" type="text/css">
  <link href="/styles/base.css" rel="stylesheet" type="text/css">
  <script src="/scripts/ctrl/menu.js"></script>
</head>

<body ng-controller="menuCtrl">
  <a href="#" id="settingsCog" ng-click="showSettings = !showSettings"></a>
  <div class="container">
    <div class="row">
      <div class="twelve columns">
        <h1>Menu</h1>
      </div>
    </div>
    <div class="row">
      <div class="two columns"><a href="/index.html">Menu</a></div>
      <div class="two columns center"><a href="/foodItems.html">Foods</a></div>
      <div class="two columns right"><a href="/recipes.html">Recipes</a></div>
    </div>

    <div id="content">

      <div id="menu">

        <div class="row" ng-show="showSettings">
          <form>
            <div class="two columns">
              <label for="calories">calories</label>
              <input type="number" id="calories" ng-model="menuSettings.calories" min="0" max="9999"/>
            </div>

            <div class="two columns">
              <label for="carbs">carbs</label>
              <input type="number" id="carbs" ng-model="menuSettings.carbs" min="0" max="9999"/>
            </div>
            <div class="two columns">
              <label for="protein">protein</label>
              <input type="number" id="protein" ng-model="menuSettings.protein" min="0" max="9999"/>
            </div>
            <div class="two columns">
              <label for="save">&nbsp;</label>
              <button type="button" id="save" ng-click="saveMenuSettings()" min="0" max="9999" class="button-primary">Save</button>
            </div>
          </form>
        </div>

        <!-- <div class="row">
          <div class="twelve columns right">
            Show: <a href="#" ng-click="getNextXDays(7)" ng-show="numberDays != 7">7</a>
            <span ng-show="numberDays == 7">7</span>
            <a href="#" ng-click="getNextXDays(30)" ng-show="numberDays != 30">30</a>
            <span ng-show="numberDays == 30">30</span>
            days
          </div>
        </div> -->

        <table ng-repeat="date in nextXDays" class="u-full-width">
          <thead>
            <tr>
              <th>{{date}}</th>
              <th class="center">cal</th>
              <th class="center">carb</th>
              <th class="center">pro</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Breakfast:</strong>
                <span ng-repeat="recipe in getMenuForDay(date, 'breakfast')">{{recipe.name}}<span ng-show="!$last">, </span></span>
              </td>
              <td class="center">{{getTotal(date, 'breakfast', 'calories')}}</td>
              <td class="center">{{getTotal(date, 'breakfast', 'carbohydrates')}}</td>
              <td class="center">{{getTotal(date, 'breakfast', 'protein')}}</td>
            </tr>
            <tr>
              <td><strong>Lunch:</strong>
                <span ng-repeat="recipe in getMenuForDay(date, 'lunch')">{{recipe.name}}<span ng-show="!$last">, </span> </span></td>
              <td class="center">{{getTotal(date, 'lunch', 'calories')}}</td>
              <td class="center">{{getTotal(date, 'lunch', 'carbohydrates')}}</td>
              <td class="center">{{getTotal(date, 'lunch', 'protein')}}</td>
            </tr>
            <tr>
              <td><strong>Dinner:</strong>
                <span ng-repeat="recipe in getMenuForDay(date, 'dinner')">{{recipe.name}}<span ng-show="!$last">, </span> </span></td>
              <td class="center">{{getTotal(date, 'dinner', 'calories')}}</td>
              <td class="center">{{getTotal(date, 'dinner', 'carbohydrates')}}</td>
              <td class="center">{{getTotal(date, 'dinner', 'protein')}}</td>
            </tr>
            <tr>
              <td><strong>Snack:</strong>
                <span ng-repeat="recipe in getMenuForDay(date, 'snack')">{{recipe.name}}<span ng-show="!$last">, </span> </span></td>
              <td class="center">{{getTotal(date, 'snack', 'calories')}}</td>
              <td class="center">{{getTotal(date, 'snack', 'carbohydrates')}}</td>
              <td class="center">{{getTotal(date, 'snack', 'protein')}}</td>
            </tr>
            <tr>
              <td><strong>Daily Total:</strong></td>
              <td class="center">{{getTotal(date, 'breakfast', 'calories') + getTotal(date, 'lunch', 'calories') + getTotal(date, 'dinner', 'calories') + getTotal(date, 'snack', 'calories')}}</td>
              <td class="center">{{getTotal(date, 'breakfast', 'carbohydrates') + getTotal(date, 'lunch', 'carbohydrates') + getTotal(date, 'dinner', 'carbohydrates') + getTotal(date, 'snack', 'carbohydrates')}}</td>
              <td class="center">{{getTotal(date, 'breakfast', 'protein') + getTotal(date, 'lunch', 'protein') + getTotal(date, 'dinner', 'protein') + getTotal(date, 'snack', 'protein')}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
